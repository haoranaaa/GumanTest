package com.dhr.compute;

import com.dhr.bean.Team;
import com.guman.common.json.JSON;
import org.apache.commons.collections.MapUtils;

import java.util.HashMap;
import java.util.Map;

/**
 * @author duanhaoran
 * @since 2019/7/23 2:58 PM
 */
public class IntegerTest {

    public static void main(String[] args) {
        Team team = getTeam();
        Map<Integer, Integer> campSizeMap = new HashMap<>(team.getCamps().size(), 1);
        int onlinePlayerCount = 0;
        int campNum = 12;
        for (Team.Camp camp : team.getCamps()) {
            int campId = camp.getId();
            campSizeMap.put(campId, 0);
            for (Team.Position position : camp.getPositions()) {
                if (position.getUser() == null) {
                    continue;
                }
                if (position.getUser().getPrepare() == 0) {
                    return;
                }
                campSizeMap.put(campId, MapUtils.getIntValue(campSizeMap, campId, 0) + 1);
            }

            int campSize = MapUtils.getIntValue(campSizeMap, campId, 0);

            onlinePlayerCount += campSize;
        }
        System.out.println(onlinePlayerCount >= 12);
    }

    public static Team getTeam() {
        String json = "{\"id\":1299697,\"topic\":\"wolfv2\",\"gameType\":1004,\"subType\":8,\"status\":\"WAIT\",\"matchId\":0,\"master\":\"17807374\",\"npcUids\":[\"999096970725\",\"999096970735\",\"999096970658\",\"999096970548\",\"999096970513\",\"999096970675\",\"999096970047\",\"999096970588\",\"999096970553\",\"999096970033\",\"999096970151\",\"999096970490\",\"999096970709\"],\"chatType\":0,\"chId\":28260269,\"title\":\"xe6x8ex92xe4xbdx8dxe8xb5x9b\",\"source\":0,\"pubInviteMsg\":0,\"voiceType\":1,\"camps\":[{\"id\":0,\"positions\":[{\"sid\":0,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970047\",\"name\":\"999096970047\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431781,\"enterTime\":1563953411780,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":1,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970709\",\"name\":\"999096970709\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431787,\"enterTime\":1563953411786,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":2,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970033\",\"name\":\"999096970033\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431747,\"enterTime\":1563953411747,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":3,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970735\",\"name\":\"999096970735\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431767,\"enterTime\":1563953411767,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":4,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970513\",\"name\":\"999096970513\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431738,\"enterTime\":1563953411737,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":5,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970725\",\"name\":\"999096970725\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431799,\"enterTime\":1563953411798,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":6,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970675\",\"name\":\"999096970675\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431755,\"enterTime\":1563953411754,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":7,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970151\",\"name\":\"999096970151\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431761,\"enterTime\":1563953411761,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":8,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"171985362\",\"name\":\"xf0x9fx92x8bxe9x9bxaa\",\"avatarUrl\":\"https://qiniustatic.wodidashi.com/Fpx8p5aVAx4ZnaOlbUUuEHdtW6GI?imageView/2/w/200/h/200\",\"iconImgLarge\":\"https://qiniustatic.wodidashi.com/Fpx8p5aVAx4ZnaOlbUUuEHdtW6GI\",\"sex\":1,\"vipLevel\":0,\"level\":23,\"money\":60630312,\"chip\":62195925,\"location\":\"\",\"gameLevel\":11,\"gameLevelScore\":116,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":-1,\"enterTime\":1563953754205,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":9,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970658\",\"name\":\"999096970658\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431774,\"enterTime\":1563953411774,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":10,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970548\",\"name\":\"999096970548\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563953431793,\"enterTime\":1563953411792,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}},{\"sid\":11,\"status\":1,\"ban\":0,\"user\":{\"uid\":\"999096970490\",\"name\":\"999096970490\",\"avatarUrl\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"iconImgLarge\":\"http://qiniu.wodidashi.com/robot/robot.jpg?imageView/2/w/200/h/200\",\"sex\":1,\"vipLevel\":0,\"level\":100,\"money\":100000,\"chip\":0,\"location\":\"xe5x8cx97xe4xbaxac\",\"gameLevel\":100,\"gameLevelScore\":0,\"rank\":0,\"userState\":\"ONLINE\",\"prepare\":1,\"limitTime\":1563952284845,\"enterTime\":1563952264844,\"micState\":0,\"speakerState\":0,\"gameSoundState\":0,\"longitude\":0,\"latitude\":0,\"escapeTimeOut\":0}}]}],\"viewerCount\":2,\"viewers\":[],\"viceType\":0,\"uidViceMap\":{},\"readyLimitTime\":0,\"masterStartLimitTime\":0,\"beMasterTimestamp\":1563949216678,\"lowerPersonTimestamp\":0,\"room\":{\"isPrivate\":0,\"callUp\":0,\"comeOn\":0,\"isTempRoom\":0,\"roomLock\":0},\"inGroup\":0,\"createTime\":1563949215960,\"updateTime\":1563953756875}";
        return JSON.readValue(json, Team.class);
    }


}
